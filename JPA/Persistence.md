## 영속성
* JPA 영속성 컨텍스트란 엔티티를 영구 저장하는 환경을 의미한다
* 데이터베이스와 애플리케이션 사이에서 객체를 보관하는 곳이다
* 객체는 EntityManager를 통해 조회, 저장, 수정, 삭제를 하는 영속성 컨텍스트를 관리한다

### 영속성 컨텍스트에 객체 저장
* EntityManager의 ```persist``` 메서드를 통해 영속성 컨텍스트에 등록이 가능하며, 등록하더라도 DB에는 반영이 되지 않는다(Commit 전)


### 영속성 컨텍스트의 특징
* 영속성 컨텍스트는 논리적인 개념이다
* 영속성 컨텍스트는 EntityManager를 생성할 때 하나씩 만들어지며, EntityManager를 주입받아서 사용한다면, 같은 트랜잭션 범위에 있는 EntityManager는 동일한 영속성 컨텍스트에 접근한다

### 영속성 컨텍스트를 사용하는 이유
* 1차 캐시: 영속성 컨텍스트 내에는 캐시가 존재하는데 이것을 1차 캐시라고 한다
    * 캐시는 Map 형태로 이루어지며, Key는 Id값 Value는 해당 Entity값이 들어가 있다
    * 검색 연산을 할 때 1차 캐시에서 엔티티를 찾아 반환하고, 없다면 데이터베이스에서 엔티티를 조회하여 반환하여준다

* 동일성 보장: 영속성 컨텍스트는 엔티티의 동일성을 보장합니다
    * 비교하려는 객체와 비교되는 객체의 인스턴스가 같은 것